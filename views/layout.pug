doctype html
html
  head
    if (user && notifs)
      .ui.primary.big.left.floated.button.openNotif(onclick="openNotif()" style="left:0; position:fixed; top:0; z-index:30;")
        i.content.icon
        span.text Notif
      .ui.left.fixed.vertical.menu.notifBar(style="width:0;")
        .ui.top.attached.button.primary(onclick="closeNotif()") Fermer
        .ui.cards.notif(style="margin: 0;")
          each notif in notifs
            .card.fluid.not
              .content
                .meta
                  p= notif["date"]
                .description
                  p= notif["notification"]
    .container
      title= title
      link(rel="stylesheet", href="/semantic/semantic.min.css")
      link(rel="stylesheet", href="/stylesheets/style.css")
      script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js")
      script(src="/javascripts/active.js")
      script(src="/socket.io/socket.io.js")
      .center
        a#titre(href="/")= "Matcha"
      if (user)
        .ui.menu.big#grey
          a.item#index(href="/")
            i.icon.home
          a.item#u(href="/u")
            i.icon.users
          .right.menu
            a.item.tooltip#search(href="/search")
              i.icon.search
            a.item.tooltip#profil(href="/profil")
              i.icon.setting
            a.item.tooltip#logout(href="/logout")
              i.icon.sign.out
      if (locals && locals.error)
        .ui.error.message
          .header
            span Erreur
          i.close.icon
          span= locals.error
      if (locals && locals.success)
        .ui.success.message
          .header
            span Message
          i.close.icon
          span= locals.success
      if (locals && locals.warning)
        .ui.warning.message
          .header
            span Message
          i.close.icon
          span= locals.warning
      if (locals && locals.info)
        .ui.info.message
          .header
            span Info
          i.close.icon
          span= locals.info
      br
      if (user)
        script.
          var socket = io.connect();
          socket.on('error', function (reason){
            console.error('Unable to connect Socket.IO', reason);
          });
          socket.on('notif', function( data ) {
            alert(data);
          });
          socket.on('message', function(data) {
            if (location.pathname == "/u/" + data.username){
              addChatMessage(data)
              openChat()}
            else
              alert("Vous avez recu un message de " + data.username)
          });
  body
    block content
